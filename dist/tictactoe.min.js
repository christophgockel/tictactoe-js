var API=function(){var t=function(t){this.endpoints=t};return t.prototype.newGame=function(t,n,i){$.ajax({url:this.endpoints.new,type:"POST",data:{board_size:t,game_mode:n},dataType:"json",async:!1}).then(function(t){i(t)})},t.prototype.play=function(t,n,i){$.ajax({url:this.endpoints.play,type:"PUT",data:{move:t},dataType:"json",async:!1,success:function(t){returnData=t,n(returnData)},error:function(t,n,a){i(a)}})},t}(),TicTacToe=function(){var t=function(t,n,i){this.api=t,this.grid=n,this.status=i,this.interval=null},n=function(t){var n=Math.sqrt(t.length);$(this.grid).empty();for(var i=0;n>i;i++){for(var a=$("<tr>"),e=0;n>e;e++)a.append($("<td>"));$(this.grid).append(a)}},i=function(t){this.updateGrid(t.board),this.updateStatus(t.message),0==t.playable&&clearInterval(this.interval)},a=function(t){n.call(this,t.board),i.call(this,t)},e=function(){clearInterval(this.interval)};return t.prototype.createNewGame=function(t,n){this.api.newGame(t,n,a.bind(this)),this.attachGridEvents()},t.prototype.attachGridEvents=function(){var t=this;$(this.grid).find("td").each(function(n,i){$(i).bind("click",function(){t.play(n+1)})})},t.prototype.detachGridEvents=function(){$(this.grid).find("td").unbind("click")},t.prototype.updateGrid=function(t){$(this.grid).find("td").each(function(n,i){var a=t[n];a&&($(i).addClass(a),$(i).text(a))})},t.prototype.updateStatus=function(t){$(this.status).text(t)},t.prototype.play=function(t){var n=this,a=[t],r=function(){n.api.play(a.pop(),i.bind(n),e.bind(n))};this.interval=setInterval(r,1)},t}();